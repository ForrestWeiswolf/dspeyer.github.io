<Html><head><title>Rodents Revenge</title>
<script>
var mouse=[6, 6], cat=[2, 2];

function move(key, loc) {
    return [loc[0]+(key%2)*(key-38),
	    loc[1]+(1-key%2)*(key-39)];
}

function getImg(l) {
    return document.getElementById(l[0]+'_'+l[1]);
}

function isEmpty(l) {
    return getImg(l) && getImg(l).src.indexOf('empty.jpg') != -1;
}

document.addEventListener('keydown',function(ev) {
    getImg(mouse).src='empty.jpg';
    for ([i, done] = [move(ev.keyCode,mouse), false]; 
	 getImg(i) && getImg(i).src.indexOf('cat.jpg') == -1 && !done;
	 i=move(ev.keyCode,i)) {
	if (getImg(i).src.indexOf('empty.jpg') != -1) {
	    [getImg(i).src, mouse, done] = ['block.jpg',move(ev.keyCode,mouse), true] ;
	}
    }
    getImg(mouse).src='mouse.jpg';	 
    for (i=0; i<9 && !isEmpty([cat[0] + i%3 - 1, cat[1] + Math.floor(i/3) - 1]); i++);
    if (i==9) {
	[document.getElementById('wins').value, getImg(cat).src] =
	    [document.getElementById('wins').value - -1, 'block.jpg'];
	for(; !isEmpty(cat);
	    cat=[Math.floor(13*Math.random()), Math.floor(13*Math.random())]);
    }
});

function tryMoveCatTo(nloc){
    if (getImg(nloc) && getImg(nloc).src.indexOf('empty.jpg') != -1) {
	[getImg(cat).src, getImg(nloc).src] = ['empty.jpg', 'cat.jpg'];
	cat=nloc;
    }
    document.getElementById('lose').style.display = 
	(getImg(nloc) && getImg(nloc).src.indexOf('mouse.jpg') != -1) ? 'block' : 
	    document.getElementById('lose').style.display;
}

function moveCat() {
    tryMoveCatTo([cat[0] + (mouse[0]-cat[0])/Math.abs(mouse[0]-cat[0]),
		  cat[1] + (mouse[1]-cat[1])/Math.abs(mouse[1]-cat[1])]);
    tryMoveCatTo([cat[0] +Math.floor(Math.random()*3-1),
		  cat[1] +Math.floor(Math.random()*3-1)]);
}

catId = setInterval('moveCat()', 50);

</script>
</head><body>
<table cellspacing=0 cellpadding=0 style="border:thick inset brown;">
<tr><td><img src=empty.jpg id=0_0></td><td><img src=empty.jpg id=1_0></td><td><img src=empty.jpg id=2_0></td><td><img src=empty.jpg id=3_0></td><td><img src=empty.jpg id=4_0></td><td><img src=empty.jpg id=5_0></td><td><img src=empty.jpg id=6_0></td><td><img src=empty.jpg id=7_0></td><td><img src=empty.jpg id=8_0></td><td><img src=empty.jpg id=9_0></td><td><img src=empty.jpg id=10_0></td><td><img src=empty.jpg id=11_0></td><td><img src=empty.jpg id=12_0></td></tr>
<tr><td><img src=empty.jpg id=0_1></td><td><img src=empty.jpg id=1_1></td><td><img src=empty.jpg id=2_1></td><td><img src=empty.jpg id=3_1></td><td><img src=empty.jpg id=4_1></td><td><img src=empty.jpg id=5_1></td><td><img src=empty.jpg id=6_1></td><td><img src=empty.jpg id=7_1></td><td><img src=empty.jpg id=8_1></td><td><img src=empty.jpg id=9_1></td><td><img src=empty.jpg id=10_1></td><td><img src=empty.jpg id=11_1></td><td><img src=empty.jpg id=12_1></td></tr>
<tr><td><img src=empty.jpg id=0_2></td><td><img src=empty.jpg id=1_2></td><td><img src=cat.jpg id=2_2></td><td><img src=empty.jpg id=3_2></td><td><img src=empty.jpg id=4_2></td><td><img src=empty.jpg id=5_2></td><td><img src=empty.jpg id=6_2></td><td><img src=empty.jpg id=7_2></td><td><img src=empty.jpg id=8_2></td><td><img src=empty.jpg id=9_2></td><td><img src=empty.jpg id=10_2></td><td><img src=empty.jpg id=11_2></td><td><img src=empty.jpg id=12_2></td></tr>
<tr><td><img src=empty.jpg id=0_3></td><td><img src=empty.jpg id=1_3></td><td><img src=empty.jpg id=2_3></td><td><img src=block.jpg id=3_3></td><td><img src=block.jpg id=4_3></td><td><img src=block.jpg id=5_3></td><td><img src=block.jpg id=6_3></td><td><img src=block.jpg id=7_3></td><td><img src=block.jpg id=8_3></td><td><img src=block.jpg id=9_3></td><td><img src=empty.jpg id=10_3></td><td><img src=empty.jpg id=11_3></td><td><img src=empty.jpg id=12_3></td></tr>
<tr><td><img src=empty.jpg id=0_4></td><td><img src=empty.jpg id=1_4></td><td><img src=empty.jpg id=2_4></td><td><img src=block.jpg id=3_4></td><td><img src=block.jpg id=4_4></td><td><img src=block.jpg id=5_4></td><td><img src=block.jpg id=6_4></td><td><img src=block.jpg id=7_4></td><td><img src=block.jpg id=8_4></td><td><img src=block.jpg id=9_4></td><td><img src=empty.jpg id=10_4></td><td><img src=empty.jpg id=11_4></td><td><img src=empty.jpg id=12_4></td></tr>
<tr><td><img src=empty.jpg id=0_5></td><td><img src=empty.jpg id=1_5></td><td><img src=empty.jpg id=2_5></td><td><img src=block.jpg id=3_5></td><td><img src=block.jpg id=4_5></td><td><img src=block.jpg id=5_5></td><td><img src=block.jpg id=6_5></td><td><img src=block.jpg id=7_5></td><td><img src=block.jpg id=8_5></td><td><img src=block.jpg id=9_5></td><td><img src=empty.jpg id=10_5></td><td><img src=empty.jpg id=11_5></td><td><img src=empty.jpg id=12_5></td></tr>
<tr><td><img src=empty.jpg id=0_6></td><td><img src=empty.jpg id=1_6></td><td><img src=empty.jpg id=2_6></td><td><img src=block.jpg id=3_6></td><td><img src=block.jpg id=4_6></td><td><img src=block.jpg id=5_6></td><td><img src=mouse.jpg id=6_6></td><td><img src=block.jpg id=7_6></td><td><img src=block.jpg id=8_6></td><td><img src=block.jpg id=9_6></td><td><img src=empty.jpg id=10_6></td><td><img src=empty.jpg id=11_6></td><td><img src=empty.jpg id=12_6></td></tr>
<tr><td><img src=empty.jpg id=0_7></td><td><img src=empty.jpg id=1_7></td><td><img src=empty.jpg id=2_7></td><td><img src=block.jpg id=3_7></td><td><img src=block.jpg id=4_7></td><td><img src=block.jpg id=5_7></td><td><img src=block.jpg id=6_7></td><td><img src=block.jpg id=7_7></td><td><img src=block.jpg id=8_7></td><td><img src=block.jpg id=9_7></td><td><img src=empty.jpg id=10_7></td><td><img src=empty.jpg id=11_7></td><td><img src=empty.jpg id=12_7></td></tr>
<tr><td><img src=empty.jpg id=0_8></td><td><img src=empty.jpg id=1_8></td><td><img src=empty.jpg id=2_8></td><td><img src=block.jpg id=3_8></td><td><img src=block.jpg id=4_8></td><td><img src=block.jpg id=5_8></td><td><img src=block.jpg id=6_8></td><td><img src=block.jpg id=7_8></td><td><img src=block.jpg id=8_8></td><td><img src=block.jpg id=9_8></td><td><img src=empty.jpg id=10_8></td><td><img src=empty.jpg id=11_8></td><td><img src=empty.jpg id=12_8></td></tr>
<tr><td><img src=empty.jpg id=0_9></td><td><img src=empty.jpg id=1_9></td><td><img src=empty.jpg id=2_9></td><td><img src=block.jpg id=3_9></td><td><img src=block.jpg id=4_9></td><td><img src=block.jpg id=5_9></td><td><img src=block.jpg id=6_9></td><td><img src=block.jpg id=7_9></td><td><img src=block.jpg id=8_9></td><td><img src=block.jpg id=9_9></td><td><img src=empty.jpg id=10_9></td><td><img src=empty.jpg id=11_9></td><td><img src=empty.jpg id=12_9></td></tr>
<tr><td><img src=empty.jpg id=0_10></td><td><img src=empty.jpg id=1_10></td><td><img src=empty.jpg id=2_10></td><td><img src=empty.jpg id=3_10></td><td><img src=empty.jpg id=4_10></td><td><img src=empty.jpg id=5_10></td><td><img src=empty.jpg id=6_10></td><td><img src=empty.jpg id=7_10></td><td><img src=empty.jpg id=8_10></td><td><img src=empty.jpg id=9_10></td><td><img src=empty.jpg id=10_10></td><td><img src=empty.jpg id=11_10></td><td><img src=empty.jpg id=12_10></td></tr>
<tr><td><img src=empty.jpg id=0_11></td><td><img src=empty.jpg id=1_11></td><td><img src=empty.jpg id=2_11></td><td><img src=empty.jpg id=3_11></td><td><img src=empty.jpg id=4_11></td><td><img src=empty.jpg id=5_11></td><td><img src=empty.jpg id=6_11></td><td><img src=empty.jpg id=7_11></td><td><img src=empty.jpg id=8_11></td><td><img src=empty.jpg id=9_11></td><td><img src=empty.jpg id=10_11></td><td><img src=empty.jpg id=11_11></td><td><img src=empty.jpg id=12_11></td></tr>
<tr><td><img src=empty.jpg id=0_12></td><td><img src=empty.jpg id=1_12></td><td><img src=empty.jpg id=2_12></td><td><img src=empty.jpg id=3_12></td><td><img src=empty.jpg id=4_12></td><td><img src=empty.jpg id=5_12></td><td><img src=empty.jpg id=6_12></td><td><img src=empty.jpg id=7_12></td><td><img src=empty.jpg id=8_12></td><td><img src=empty.jpg id=9_12></td><td><img src=empty.jpg id=10_12></td><td><img src=empty.jpg id=11_12></td><td><img src=empty.jpg id=12_12></td></tr>
</table>
Use the arrow keys to move.  The cat can travel on diagonals -- you can't.  When you trap him, he will turn into a block, and a new cat will randomly appear.
<form>Cats defeated: <input id=wins value=0 style="width:3em;" disabled></form>
<h1 id="lose" style="display:none;">You Lose</h1>
</body></html>
